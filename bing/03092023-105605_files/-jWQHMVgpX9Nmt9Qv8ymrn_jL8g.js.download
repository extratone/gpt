var PBUtils,__spreadArray,BncHeadCtrl,PnpEt;(function(n){function t(n,t){for(var i=Element.prototype.matches||Element.prototype.msMatchesSelector;n instanceof Element;){if(i.call(n,t))return n;n=n.parentNode}return null}n.sj_fa2=t})(PBUtils||(PBUtils={})),function(n){function t(t,i,r,u,f){var e,o;if(u===void 0&&(u=!0),f===void 0&&(f=!0),i==null||i.length===0||t==null)return function(){};var s="click",h="focusin",c="keydown",l=function(){sj_be(_d,s,e);sj_be(_d,h,e);sj_be(_d,c,e)};return sb_st(l,0),e=function(e){var s=sj_et(e),h=n.sj_fa2(s,t)!=null,l=i.some(function(t){return n.sj_fa2(s,t)!=null})||h,a=h&&e.type=="click",v=f&&a,c=e.key,y=c==="Escape"||c==="Esc";(!l||y||v)&&(r(e),u&&o(),e.stopPropagation())},o=function(){sj_ue(_d,s,e);sj_ue(_d,h,e);sj_ue(_d,c,e)},o}n.bindCallbackOnExitIntent=t}(PBUtils||(PBUtils={}));__spreadArray=this&&this.__spreadArray||function(n,t,i){if(i||arguments.length===2)for(var r=0,f=t.length,u;r<f;r++)!u&&r in t||(u||(u=Array.prototype.slice.call(t,0,r)),u[r]=t[r]);return n.concat(u||Array.prototype.slice.call(t))},function(n){function e(){s.hdrClk=null;u&&u.classList.contains(r)&&(t.setAttribute(w,"true"),c?i=f():tt(),u.classList.remove(r),BNCenter.inst("Click","BellIcon"),b=f(),a(_w,p,v),nt(t,h,e),PBUtils.bindCallbackOnExitIntent(k,[g],et))}function et(n){var i=n.key,f=i==="Escape"||i==="Esc";f&&t.focus();t.setAttribute(w,"false");u.classList.add(r);ot();nt(_w,p,v);v();sb_st(function(){a(t,h,e)},100)}function ot(){for(var i,t=_d.querySelectorAll(".".concat(y)),n=0;n<t.length;n++)i=t[n],i.classList.remove(y)}function tt(){var n=it("/bnc/notifications?IG=".concat(_G.IG,"&IID=").concat(rt));sj_ajax(n,{callback:function(n,t){if(!n){BNCenter.inst(ft,ut);return}if(l&&(l.innerHTML="",st(l,t)),d!=null){var u="classList",e=Object.getOwnPropertyDescriptor,o=Element.prototype,s=HTMLElement.prototype;e(o,u)||HTMLElement&&e(s,u)&&Object.defineProperty(o,u,e(s,u));d.classList.add(r);ht()}PnpEt.bindNotificationLinksInst();c&&BNCenter.inst("Update","Flyout",!1);c=!0;i=f()},headers:{"X-PERSONALBING-CSRF":"1"}})}function st(n,t){var i,r,u;n!=null&&(i=sj_ce("div"),t.appendTo(i),r=[].slice.call(i.getElementsByTagName("style")),r.forEach(function(n){_d.head.appendChild(n)}),u=[].slice.call(i.childNodes),u.forEach(function(t){n.appendChild(t)}))}function v(){var r=i>0,n,t;r&&(n=["DwellTime",f()-i],t=i-b,t>0&&n.push("ContentLoadingTime",t),BNCenter.inst.apply(BNCenter,__spreadArray(["Close","Flyout",!0],n,!1)))}function ht(){_d.title=_d.title.replace(/^\(\d+\) /,"");localStorage.removeItem("bnc_unread_count")}var it=_w.TU?TU.acpp:function(n){return n},o="BNCenter";_w[o]=_w[o]||{};var s=_w[o],rt=s.insertId,ut="Notifications",ft="ApiFailure",r="b_hide",y="bnc-notification__unread-gleam",h="click",p="beforeunload",w="aria-expanded",c=!1,i=0,b,k="#id_nc",t=_qs(k),d=_qs(".bnc-hcc"),g=".bnc-f",u=_qs(g),l=_qs(".bnc-fc"),a=sj_be,nt=sj_ue,f=sb_gt;a(t,h,e);s.hdrClk&&e();n.fetchAndReplaceNotificationFlyoutContent=tt}(BncHeadCtrl||(BncHeadCtrl={})),function(n){function t(n,t){var i=new XMLHttpRequest,r;i.open("POST","/pnp/inst",!0);i.withCredentials=!0;i.setRequestHeader("Content-Type","application/json;charset=UTF-8");i.setRequestHeader("X-PERSONALBING-CSRF","1");r=JSON.stringify({nt:n.notificationType,nid:n.notificationId,c:n.channel,a:t});i.send(r)}function u(){for(var r=_d.querySelectorAll(".bnc-notification__link"),f=function(u){sj_be(r[u],"click",function(){return t(i(r[u]),n.ActionType.Click)},!0)},u=0;u<r.length;u++)f(u)}function i(n){var i=sj_fa(n,".bnc-flyout__notifications"),t=sj_fa(n,".bnc-notification");return{channel:i!=null?i.getAttribute("data-c"):"",notificationType:t!=null?t.getAttribute("data-nt"):"",notificationId:t!=null?t.getAttribute("data-nid"):""}}var r;(function(n){n[n.Undefined=-1]="Undefined";n[n.Send=0]="Send";n[n.Show=1]="Show";n[n.Click=2]="Click";n[n.OpenSettings=3]="OpenSettings";n[n.BingInterestAdd=4]="BingInterestAdd";n[n.BingInterestDelete=5]="BingInterestDelete";n[n.BingInferenceConfirm=6]="BingInferenceConfirm";n[n.BingInferenceDeny=7]="BingInferenceDeny";n[n.Dismiss=8]="Dismiss";n[n.BingInterestDisable=9]="BingInterestDisable"})(r=n.ActionType||(n.ActionType={}));n.postInstrumentation=t;n.bindNotificationLinksInst=u;n.getPnpEtInfo=i}(PnpEt||(PnpEt={}))