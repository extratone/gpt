var VideoRichHoverInst;(function(n){function c(n,i){f&&t&&n&&f.bind&&!(n.length<1)&&(h=f.bind,e[n]&&(e[n]=null),e[n]=new s(i.enperfinst,i.enhoverhb,i.enmmstinst,i.chflturl&&i.chflturl.length>0,i.enmuteinst,i.hoverdelayms,i.instName,i.fid,n))}function i(n,t){return Math.max(t-n,0)}function l(n,t,i){var r={T:"CI.RichHover.Summary",AppNS:n,K:t,TS:null,DU:null,THLT:null,RCLT:null,MOS:null,MOT:null,IsMT:0,VPST:null,VDT:null,MaxVPT:null,SCNT:0,MMSTLT:null,IsMMT:null,MuteCNT:0,Mute:null,IFLT:null,IFSCT:null};(i===VRHEnums.ThumbnailType.MT||i===VRHEnums.ThumbnailType.MMMT)&&(r.IsMMT=0,r.VPST=null,r.VDT=null,r.MaxVPT=null);switch(i){case VRHEnums.ThumbnailType.MT:r.IsMT=1;break;case VRHEnums.ThumbnailType.MMMT:r.IsMMT=1;r.IsMT=1;r.SCNT=0;r.MMSTLT=null}return r}function r(n,t,i,r,u,f){return{T:"CI.Hover",AppNS:n,K:t,Name:i,TS:sb_gt(),HType:r,FID:u,TType:f}}function a(n,t,i,r,u,f){return{T:"CI.RichHover_Channel",AppNS:n,K:t,Name:i,TS:sb_gt(),PubUser:r,PubId:u,EventType:f}}function v(n,t,i,r){return{T:"CI.RichHover_MMSTHover",AppNS:n,K:t,Name:r,TS:sb_gt(),EN:"mmst_hover",Index:i}}function y(n,t){n!==null&&o&&o.RegisterEventFunc("Hover",n.reid,n.murl,{HoverTime:t})}var u="undefined",f=typeof SmartEvent!=u?SmartEvent:null,t=typeof VRHConsts!=u?VRHConsts:null,h,e=[],o=typeof OpalRecoInst!=u?OpalRecoInst:null,s;n.init=c;s=function(){function n(n,u,f,e,o,s,h,c,y){var p=this;this.hoverDelayTime=0;this.enablePerf=!1;this.enableHover=!1;this.enableMMSTHover=!1;this.bindEvents=function(){sj_evt.bind(t.HoverMouseInEvt,p.mouseIn);sj_evt.bind(t.HoverMouseOutEvt,p.mouseOut);p.enablePerf&&(sj_evt.bind(t.HoverCaptionLoadEvt,p.richCaptionLoaded),sj_evt.bind(t.HoverMMSTLoadEvt,p.mmstLoaded),sj_evt.bind(t.PlayerDownloadEndEvt,p.videoDownloaded),sj_evt.bind(t.PlayerEndEvt,p.videoEnd),sj_evt.bind(t.PlayerStartEvt,p.videoStart),sj_evt.bind(t.HoverThumbLoadEvt,p.thumbnailLoaded),sj_evt.bind(t.IframeLoadedEvt,p.iframeLoaded),sj_evt.bind(t.IframeScrollEvt,p.iframeScroll));p.enableHover&&sj_evt.bind(t.HoverStartEvt,p.hoverStart);p.enableMMSTHover&&sj_evt.bind(t.MMSTSeekEvt,p.seek);p.enableChannelFilter&&sj_evt.bind(t.HoverChannelFilterEvt,p.channelEvent);p.enableMuteInst&&sj_evt.bind(t.HoverMuteEvt,p.muteClick)};this.isCallMe=function(n){return n&&n.length>1&&n[1]&&n[1].AppNS&&n[1].K&&n[1].HoverContainerId&&p.nameSpace===n[1].AppNS&&p.kValue===n[1].K&&p.containerName===n[1].HoverContainerId?!0:!1};this.getTriggerType=function(n){return n&&n.length>2&&!isNaN(n[2])?n[2]:-1};this.mouseIn=function(n){var r,u,f,e,o,s,h,c,t;!n&&n.length<4||(t=[],t.push(n[0]),t.push((r=n[1])===null||r===void 0?void 0:r.instMetaData),p.isCallMe(t))||(p.nameSpace=(f=(u=n[1])===null||u===void 0?void 0:u.instMetaData)===null||f===void 0?void 0:f.AppNS,p.kValue=(o=(e=n[1])===null||e===void 0?void 0:e.instMetaData)===null||o===void 0?void 0:o.K,p.hoverType=(h=(s=n[1])===null||s===void 0?void 0:s.instMetaData)===null||h===void 0?void 0:h.HoverType,p.videoRichHoverMetaData=(c=n[1])===null||c===void 0?void 0:c.videoRichHoverMetaData,p.thumbnailType=n[3],(p.enablePerf||p.enableMMSTHover||p.enableMuteInst)&&(p.perfInst=l(p.nameSpace,p.kValue,p.thumbnailType),p.perfInst.MOS=i(_G.ST,sb_gt()),p.mouseInStartTime=sb_gt()))};this.mouseOut=function(n){p.isCallMe(n)&&(p.enablePerf&&p.perfInst&&(p.perfInst.TS=sb_gt(),p.perfInst.MOT=i(p.mouseInStartTime,p.perfInst.TS),p.perfInst.DU=Math.max(p.perfInst.MOT,p.perfInst.MMSTLT,p.perfInst.THLT,p.perfInst.RCLT),p.perfInst.MaxVPT||(p.perfInst.MaxVPT=p.perfInst.MOT),p.perfInst.MOS>0&&p.perfInst.MOT>p.hoverDelayTime+100&&mmLog(JSON.stringify(p.perfInst)),p.perfInst=null),p.nameSpace=null,p.kValue=null,p.hoverType=null,p.hoverStartTime=null,p.mouseInStartTime=null,p.videoStartTime=null,p.perfInst=null,p.videoRichHoverMetaData=null);p.hoverStop=!0;p.unbindHoverHeartBeatEvents()};this.hoverStart=function(n){var t,i,u,f;if(p.isCallMe(n)&&(p.hoverStop=!1,p.hoverStartTime=sb_gt(),p.enableHover)){t=p.getTriggerType(n);i=r(p.nameSpace,p.kValue,p.instName,"h",p.featureID,t);mmLog(JSON.stringify(i));switch(t){case VRHEnums.TriggerType.AutoplayTrigger:u=r(p.nameSpace,p.kValue,p.instName,"a",p.featureID,t);mmLog(JSON.stringify(u));break;case VRHEnums.TriggerType.HoverLoopPlayTrigger:f=r(p.nameSpace,p.kValue,p.instName,"l",p.featureID,t);mmLog(JSON.stringify(f));break;default:p.bindHoverHeartBeatEvents(n)}}};this.channelEvent=function(n){p.isCallMe(n)!==!1&&(n.length<5&&n[2]&&n[2].length>0&&n[3]&&n[3].length>0&&n[4]&&n[4].length>0||mmLog(JSON.stringify(a(p.nameSpace,p.kValue,p.instName,n[3],n[4],n[5]))))};this.unbindHoverHeartBeatEvents=function(){p.hoverInst2&&sb_ct(p.hoverInst2);p.hoverInst5&&sb_ct(p.hoverInst5);p.hoverInst10&&sb_ct(p.hoverInst10);p.hoverInst2=p.hoverInst5=p.hoverInst10=null};this.videoStart=function(n){p.isCallMe(n)&&!p.videoStartTime&&(p.videoStartTime=sb_gt(),p.perfInst.VPST=i(p.mouseInStartTime,p.videoStartTime))};this.videoEnd=function(n){p.isCallMe(n)&&!p.perfInst.MaxVPT&&(p.perfInst.MaxVPT=i(p.videoStartTime,sb_gt()))};this.muteClick=function(n){p.isCallMe(n)&&p.perfInst&&(p.perfInst.MuteCNT++,n.length>2&&(p.perfInst.Mute=n[2]===!0?1:0))};this.seek=function(n){if(p.isCallMe(n)&&(p.perfInst&&p.perfInst.SCNT++,p.enableMMSTHover)){if(!n||n.length<3)return;var t=parseInt(n[2]);if(!p.nameSpace||!p.kValue||isNaN(t))return;mmLog(JSON.stringify(v(p.nameSpace,p.kValue,t,p.instName)))}};this.videoDownloaded=function(n){p.isCallMe(n)&&p.perfInst&&!p.perfInst.VDT&&(p.perfInst.VDT=i(p.mouseInStartTime,sb_gt()),p.enableMuteInst&&n.length>3&&(p.perfInst.Mute=n[3]===!0?1:0))};this.thumbnailLoaded=function(n){p.isCallMe(n)&&p.perfInst&&!p.perfInst.THLT&&(p.perfInst.THLT=i(p.mouseInStartTime,sb_gt()))};this.mmstLoaded=function(n){p.isCallMe(n)&&p.perfInst&&!p.perfInst.MMSTLT&&(p.perfInst.MMSTLT=i(p.mouseInStartTime,sb_gt()))};this.richCaptionLoaded=function(n){p.isCallMe(n)&&p.perfInst&&!p.perfInst.RCLT&&(p.perfInst.RCLT=i(p.mouseInStartTime,sb_gt()))};this.iframeLoaded=function(n){if(p.isCallMe(n)&&n.length>2&&p.perfInst&&!p.perfInst.IFLT){var t=n[2];p.perfInst.IFLT=i(p.mouseInStartTime,sb_gt());t||(p.perfInst.IFLT=-p.perfInst.IFLT)}};this.iframeScroll=function(n){p.isCallMe(n)&&p.perfInst&&!p.perfInst.IFSCT&&(p.perfInst.IFSCT=i(p.mouseInStartTime+p.perfInst.IFLT,sb_gt()))};s>0&&(this.hoverDelayTime=s);this.enablePerf=n;this.enableHover=u;this.enableMMSTHover=f;this.enableChannelFilter=e;this.enableMuteInst=o;this.instName=h;this.featureID=c;this.containerName=y;this.bindEvents()}return n.prototype.bindHoverHeartBeatEvents=function(n){var t=this,i=this.getTriggerType(n);this.hoverInst2=sb_st(function(){t.hoverStop||(t.hoverInst2=null,mmLog(JSON.stringify(r(t.nameSpace,t.kValue,t.instName,"d2",t.featureID,i))))},2e3);this.hoverInst5=sb_st(function(){t.hoverStop||(t.hoverInst5=null,sj_evt.fire(VRHConsts.Hover5SEvt,n),mmLog(JSON.stringify(r(t.nameSpace,t.kValue,t.instName,"d5",t.featureID,i))),y(t.videoRichHoverMetaData,5e3))},5e3);this.hoverInst10=sb_st(function(){t.hoverStop||(t.hoverInst10=null,mmLog(JSON.stringify(r(t.nameSpace,t.kValue,t.instName,"d10",t.featureID,i))))},1e4)},n}()})(VideoRichHoverInst||(VideoRichHoverInst={}))