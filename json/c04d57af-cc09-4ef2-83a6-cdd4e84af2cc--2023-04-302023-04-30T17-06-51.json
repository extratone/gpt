{"id":"c04d57af-cc09-4ef2-83a6-cdd4e84af2cc","title":"XML flight plan generation","create_time":1674900747.305399,"update_time":1674900811,"mapping":{"2be86252-cf96-41b0-a960-f87904965fa0":{"id":"2be86252-cf96-41b0-a960-f87904965fa0","message":{"id":"2be86252-cf96-41b0-a960-f87904965fa0","author":{"role":"system","metadata":{}},"create_time":1674900747.305399,"content":{"content_type":"text","parts":[""]},"end_turn":true,"weight":1,"metadata":{},"recipient":"all"},"parent":"c304aba2-957d-4559-8048-4f6d25371969","children":["24409131-5702-4fd7-b291-da0abb8b5185"]},"c304aba2-957d-4559-8048-4f6d25371969":{"id":"c304aba2-957d-4559-8048-4f6d25371969","children":["2be86252-cf96-41b0-a960-f87904965fa0"]},"24409131-5702-4fd7-b291-da0abb8b5185":{"id":"24409131-5702-4fd7-b291-da0abb8b5185","message":{"id":"24409131-5702-4fd7-b291-da0abb8b5185","author":{"role":"user","metadata":{}},"create_time":1674900747.306212,"content":{"content_type":"text","parts":["Write Javascript code to transform this string: OMDB DB464 IVURO KUSEN LALDO GIDIL IMLOT 2500N/05700E KATUS PEDEX KINOX EGPIC EGRON LAKIV OPKC\n\nInto this file:\n<?xml version=\"1.0\" encoding=\"utf-8\"?>\n<flight-plan xmlns=\"http://www8.garmin.com/xmlschemas/FlightPlan/v1\">\n  <created>2023-01-28T10:08:49Z</created>\n  <waypoint-table>\n    <waypoint>\n      <identifier>OMDB</identifier>\n      <type>AIRPORT</type>\n      <country-code>OM</country-code>\n      <lat>25.252778</lat>\n      <lon>55.364444</lon>\n      <comment />\n    </waypoint>\n    <waypoint>\n      <identifier>DB464</identifier>\n      <type>INT</type>\n      <country-code>OM</country-code>\n      <lat>25.355028</lat>\n      <lon>55.761861</lon>\n      <comment />\n    </waypoint>\n    <waypoint>\n      <identifier>IVURO</identifier>\n      <type>INT</type>\n      <country-code>OM</country-code>\n      <lat>25.327778</lat>\n      <lon>56.154167</lon>\n      <comment />\n    </waypoint>\n    <waypoint>\n      <identifier>KUSEN</identifier>\n      <type>INT</type>\n      <country-code>OM</country-code>\n      <lat>25.307778</lat>\n      <lon>56.394444</lon>\n      <comment />\n    </waypoint>\n    <waypoint>\n      <identifier>LALDO</identifier>\n      <type>INT</type>\n      <country-code>OO</country-code>\n      <lat>25.301667</lat>\n      <lon>56.600000</lon>\n      <comment />\n    </waypoint>\n    <waypoint>\n      <identifier>GIDIL</identifier>\n      <type>INT</type>\n      <country-code>OO</country-code>\n      <lat>25.295047</lat>\n      <lon>56.822917</lon>\n      <comment />\n    </waypoint>\n    <waypoint>\n      <identifier>IMLOT</identifier>\n      <type>INT</type>\n      <country-code>OO</country-code>\n      <lat>25.285556</lat>\n      <lon>57.134444</lon>\n      <comment />\n    </waypoint>\n    <waypoint>\n      <identifier>2557E</identifier>\n      <type>INT</type>\n      <country-code>XX</country-code>\n      <lat>25.000000</lat>\n      <lon>57.000000</lon>\n      <comment />\n    </waypoint>\n    <waypoint>\n      <identifier>KATUS</identifier>\n      <type>INT</type>\n      <country-code>OI</country-code>\n      <lat>25.266667</lat>\n      <lon>57.783333</lon>\n      <comment />\n    </waypoint>\n    <waypoint>\n      <identifier>PEDEX</identifier>\n      <type>INT</type>\n      <country-code>OI</country-code>\n      <lat>25.203056</lat>\n      <lon>59.358611</lon>\n      <comment />\n    </waypoint>\n    <waypoint>\n      <identifier>KINOX</identifier>\n      <type>INT</type>\n      <country-code>OI</country-code>\n      <lat>25.162500</lat>\n      <lon>60.161667</lon>\n      <comment />\n    </waypoint>\n    <waypoint>\n      <identifier>EGPIC</identifier>\n      <type>INT</type>\n      <country-code>OI</country-code>\n      <lat>25.136389</lat>\n      <lon>60.625000</lon>\n      <comment />\n    </waypoint>\n    <waypoint>\n      <identifier>EGRON</identifier>\n      <type>INT</type>\n      <country-code>OP</country-code>\n      <lat>25.078889</lat>\n      <lon>61.545833</lon>\n      <comment />\n    </waypoint>\n    <waypoint>\n      <identifier>LAKIV</identifier>\n      <type>INT</type>\n      <country-code>OP</country-code>\n      <lat>24.528889</lat>\n      <lon>64.828889</lon>\n      <comment />\n    </waypoint>\n    <waypoint>\n      <identifier>OPKC</identifier>\n      <type>AIRPORT</type>\n      <country-code>OP</country-code>\n      <lat>24.908558</lat>\n      <lon>67.162761</lon>\n      <comment />\n    </waypoint>\n  </waypoint-table>\n  <route>\n    <route-name>OMDB OPKC</route-name>\n    <flight-plan-index>1</flight-plan-index>\n    <route-point>\n      <waypoint-identifier>OMDB</waypoint-identifier>\n      <waypoint-type>AIRPORT</waypoint-type>\n      <waypoint-country-code>OM</waypoint-country-code>\n    </route-point>\n    <route-point>\n      <waypoint-identifier>DB464</waypoint-identifier>\n      <waypoint-type>INT</waypoint-type>\n      <waypoint-country-code>OM</waypoint-country-code>\n    </route-point>\n    <route-point>\n      <waypoint-identifier>IVURO</waypoint-identifier>\n      <waypoint-type>INT</waypoint-type>\n      <waypoint-country-code>OM</waypoint-country-code>\n    </route-point>\n    <route-point>\n      <waypoint-identifier>KUSEN</waypoint-identifier>\n      <waypoint-type>INT</waypoint-type>\n      <waypoint-country-code>OM</waypoint-country-code>\n    </route-point>\n    <route-point>\n      <waypoint-identifier>LALDO</waypoint-identifier>\n      <waypoint-type>INT</waypoint-type>\n      <waypoint-country-code>OO</waypoint-country-code>\n    </route-point>\n    <route-point>\n      <waypoint-identifier>GIDIL</waypoint-identifier>\n      <waypoint-type>INT</waypoint-type>\n      <waypoint-country-code>OO</waypoint-country-code>\n    </route-point>\n    <route-point>\n      <waypoint-identifier>IMLOT</waypoint-identifier>\n      <waypoint-type>INT</waypoint-type>\n      <waypoint-country-code>OO</waypoint-country-code>\n    </route-point>\n    <route-point>\n      <waypoint-identifier>2557E</waypoint-identifier>\n      <waypoint-type>INT</waypoint-type>\n      <waypoint-country-code>XX</waypoint-country-code>\n    </route-point>\n    <route-point>\n      <waypoint-identifier>KATUS</waypoint-identifier>\n      <waypoint-type>INT</waypoint-type>\n      <waypoint-country-code>OI</waypoint-country-code>\n    </route-point>\n    <route-point>\n      <waypoint-identifier>PEDEX</waypoint-identifier>\n      <waypoint-type>INT</waypoint-type>\n      <waypoint-country-code>OI</waypoint-country-code>\n    </route-point>\n    <route-point>\n      <waypoint-identifier>KINOX</waypoint-identifier>\n      <waypoint-type>INT</waypoint-type>\n      <waypoint-country-code>OI</waypoint-country-code>\n    </route-point>\n    <route-point>\n      <waypoint-identifier>EGPIC</waypoint-identifier>\n      <waypoint-type>INT</waypoint-type>\n      <waypoint-country-code>OI</waypoint-country-code>\n    </route-point>\n    <route-point>\n      <waypoint-identifier>EGRON</waypoint-identifier>\n      <waypoint-type>INT</waypoint-type>\n      <waypoint-country-code>OP</waypoint-country-code>\n    </route-point>\n    <route-point>\n      <waypoint-identifier>LAKIV</waypoint-identifier>\n      <waypoint-type>INT</waypoint-type>\n      <waypoint-country-code>OP</waypoint-country-code>\n    </route-point>\n    <route-point>\n      <waypoint-identifier>OPKC</waypoint-identifier>\n      <waypoint-type>AIRPORT</waypoint-type>\n      <waypoint-country-code>OP</waypoint-country-code>\n    </route-point>\n  </route>\n</flight-plan>"]},"weight":1,"metadata":{"timestamp_":"absolute"},"recipient":"all"},"parent":"2be86252-cf96-41b0-a960-f87904965fa0","children":["6521be54-c679-47be-bea5-b7a11aaeb2d5"]},"6521be54-c679-47be-bea5-b7a11aaeb2d5":{"id":"6521be54-c679-47be-bea5-b7a11aaeb2d5","message":{"id":"6521be54-c679-47be-bea5-b7a11aaeb2d5","author":{"role":"assistant","metadata":{}},"create_time":1674900809.865695,"content":{"content_type":"text","parts":["Here is one possible solution:\n```javascript\nvar inputString = \"OMDB DB464 IVURO KUSEN LALDO GIDIL IMLOT 2500N/05700E KATUS PEDEX KINOX EGPIC EGRON LAKIV OPKC\";\nvar waypoints = inputString.split(\" \");\n\nvar xml = '<?xml version=\"1.0\" encoding=\"utf-8\"?>\\n' +\n    '<flight-plan xmlns=\"http://www8.garmin.com/xmlschemas/FlightPlan/v1\">\\n' +\n    '  <created>' + new Date().toISOString() + '</created>\\n' +\n    '  <waypoint-table>\\n';\n\nfor (var i = 0; i < waypoints.length; i++) {\n  var waypoint = waypoints[i];\n  var countryCode = \"XX\";\n  if (waypoint.endsWith(\"N\")) {\n    countryCode = \"OO\";\n  } else if (waypoint.endsWith(\"E\")) {\n    countryCode = \"OI\";\n  } else if (waypoint.endsWith(\"C\")) {\n    countryCode = \"OP\";\n  }\n\n  var identifier = waypoint.replace(/[0-9]/g, '').replace(\"/\",'');\n  var lat = parseFloat(waypoint.substring(waypoint.indexOf(\"N\") - 4, waypoint.indexOf(\"N\")))/100;\n  var lon = parseFloat(waypoint.substring(waypoint.indexOf(\"E\") - 4, waypoint.indexOf(\"E\")))/100;\n  var type = \"INT\";\n  if (i === 0) {\n    type = \"AIRPORT\";\n    countryCode = \"OM\";\n  }\n  xml += '    <waypoint>\\n' +\n      '      <identifier>' + identifier + '</identifier>\\n' +\n      '      <type>' + type + '</type>\\n' +\n      '      <country-code>' + countryCode + '</country-code>\\n' +\n      '      <lat>' + lat + '</lat>\\n' +\n      '      <lon>' + lon + '</lon>\\n' +\n      '      <comment />\\n' +\n      '    </waypoint>\\n';\n}\n\nxml += '  </waypoint-table>\\n' +\n    '</flight-plan>';\nconsole.log(xml);\n```\nPlease note that this is an example and it's not guaranteed to work for all cases and it does not handle the case where the input string is not well formatted.\n"]},"end_turn":true,"weight":1,"metadata":{"finish_details":{"type":"stop","stop":"<|im_end|>"},"timestamp_":"absolute"},"recipient":"all"},"parent":"24409131-5702-4fd7-b291-da0abb8b5185","children":[]}},"moderation_results":[],"current_node":"6521be54-c679-47be-bea5-b7a11aaeb2d5"}